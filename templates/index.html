<!--<a href="/exec" class="button"> This link will invoke Parse method </a> -->
<html>
<body>
<style>
@import url(https://maxcdn.bootstrapcdn.com/bootstrap/3.3.4/css/bootstrap.min.css);
@import url(https://fonts.googleapis.com/css?family=Comfortaa);

body {
  font-family: 'Comfortaa', cursive;
  background: #353535;
  color: #FFF;
}
.jumbotron h1 {
  color: #353535;
}


footer {
  margin-bottom: 0 !important;
  margin-top: 80px;
}
footer p {
  margin: 0;
  padding: 0;
}
span.icon {
  margin: 0 5px;
  color: #D64541;
}
h2 {
  color: #BDC3C7;
  text-transform: uppercase;
  letter-spacing: 1px;
}
.mrng-60-top {
  margin-top: 60px;
}
/* Global Button Styles */
a.animated-button:link, a.animated-button:visited {
  position: relative;
  display: block;
  margin: 30px auto 0;
  padding: 14px 15px;
  color: #fff;
  font-size:14px;
  font-weight: bold;
  text-align: center;
  text-decoration: none;
  text-transform: uppercase;
  overflow: hidden;
  letter-spacing: .08em;
  border-radius: 0;
  text-shadow: 0 0 1px rgba(0, 0, 0, 0.2), 0 1px 0 rgba(0, 0, 0, 0.2);
  -webkit-transition: all 1s ease;
  -moz-transition: all 1s ease;
  -o-transition: all 1s ease;
  transition: all 1s ease;
}
a.animated-button:link:after, a.animated-button:visited:after {
  content: "";
  position: absolute;
  height: 0%;
  left: 50%;
  top: 50%;
  width: 150%;
  z-index: -1;
  -webkit-transition: all 0.75s ease 0s;
  -moz-transition: all 0.75s ease 0s;
  -o-transition: all 0.75s ease 0s;
  transition: all 0.75s ease 0s;
}
a.animated-button:link:hover, a.animated-button:visited:hover {
  color: #FFF;
  text-shadow: none;
}
a.animated-button:link:hover:after, a.animated-button:visited:hover:after {
  height: 450%;
}
a.animated-button:link, a.animated-button:visited {
  position: relative;
  display: block;
  margin: 30px auto 0;
  padding: 14px 15px;
  color: #fff;
  font-size:14px;
  border-radius: 0;
  font-weight: bold;
  text-align: center;
  text-decoration: none;
  text-transform: uppercase;
  overflow: hidden;
  letter-spacing: .08em;
  text-shadow: 0 0 1px rgba(0, 0, 0, 0.2), 0 1px 0 rgba(0, 0, 0, 0.2);
  -webkit-transition: all 1s ease;
  -moz-transition: all 1s ease;
  -o-transition: all 1s ease;
  transition: all 1s ease;
}

/* Victoria Buttons */

a.animated-button.victoria-one {
  border: 2px solid #D24D57;
}
a.animated-button.victoria-one:after {
  background: #D24D57;
  -moz-transform: translateX(-50%) translateY(-50%) rotate(-25deg);
  -ms-transform: translateX(-50%) translateY(-50%) rotate(-25deg);
  -webkit-transform: translateX(-50%) translateY(-50%) rotate(-25deg);
  transform: translateX(-50%) translateY(-50%) rotate(-25deg);
}
a.animated-button.victoria-two {
  border: 2px solid #D24D57;
}
a.animated-button.victoria-two:after {
  background: #D24D57;
  -moz-transform: translateX(-50%) translateY(-50%) rotate(25deg);
  -ms-transform: translateX(-50%) translateY(-50%) rotate(25deg);
  -webkit-transform: translateX(-50%) translateY(-50%) rotate(25deg);
  transform: translateX(-50%) translateY(-50%) rotate(25deg);
}
#container {
	margin: 0px auto;
  width : "640";
  height:"480";
	border: 10px #333 solid;
}
#videoElement {
	background-color: #666;
}

/* Control the right side */
.right {
  padding-top: 20px;
  right: 0;
  background-color: red;
}

/* If you want the content centered horizontally and vertically */
.centered {
  position: absolute;
  top: 50%;
  left: 50%;
  transform: translate(-50%, -50%);
  text-align: center;
}

/* Style the image inside the centered container, if needed */
.centered img {
  width: 150px;
  border-radius: 50%;
}

.button {
  background-color: #4CAF50; /* Green */
  border: none;
  color: white;
  padding: 15px 32px;
  text-align: center;
  text-decoration: none;
  display: inline-block;
  font-size: 16px;
}

</style>

<div class="jumbotron text-center">
  <div class="container">
    <h1>Advertisment based on AI human features recognition </h1>
    <p style="color:#888;">Ahmed Elmahy</p>


    <h2 class="button" id="snap">Click here to Open Camera</h2>

  
    <div id="viewer">
        <div id="cam">
            <video style="display:block;" id="video"  width="640" height="480" autoplay></video>
        </div>
    </div>
    <div>""</div>
    <div class="right">
        <h3 id="result_gender">Results</h3>
        <h3 id="result_glass">Results</h3>
        <h3 id="result_chubby">Results</h3>
    </div>
  </div>
</div>








<script src="https://code.jquery.com/jquery-1.12.2.min.js" type="text/javascript"></script>

<script>
//<div id="res" style="cursor:pointer;height:30px;"></div>
//var video = document.querySelector("#videoElement");
var video = document.getElementById('video');

var ctx;
var canvas = document.createElement('canvas');
// Converts image to canvas; returns new canvas element
canvas.width="640"
canvas.height="480"


document.getElementById("snap").addEventListener("click", function() {
  if (navigator.mediaDevices.getUserMedia) {
  navigator.mediaDevices.getUserMedia({ video: true })
    .then(function (stream) {
      video.srcObject = stream;
      webcamStream = stream;

      window.setInterval(function(){
      canvas.getContext("2d").drawImage(video, 0, 0, 640, 480);
      send_canvas_ctx();
      $("#res").show();
      }, 1000);

    })
    .catch(function (err0r) {
      console.log("Something went wrong!");
    });
}

});





function ping() {
	window.fetch('/snap_a_signal')
	  .then(function(response) {
		      return response.text()
		    }).then(function(body) {
          if (body["result"] == "0") {
            console.log(body["result"] == "0");
          } else {
				    console.log(body);
          }
		    });
}


function send_canvas_ctx() {
    input_data = canvas.toDataURL('image/png');
	  window.fetch('/snap_a_signal', {
  		method: 'POST',
  		headers: {
    		'Content-Type': 'application/json'
  		},
  		body: JSON.stringify({
    		data: input_data
  		})
	}).then((response) => response.json()).then((json) => {

   if (json["result"] == "0"){
    0
  } else {
    document.getElementById('result_gender').innerHTML = json["gender"]
    document.getElementById('result_glass').innerHTML = json["glass"]
    document.getElementById('result_chubby').innerHTML = json["chubby"]

  }
  })}
          



</script>

</body>
</html>
